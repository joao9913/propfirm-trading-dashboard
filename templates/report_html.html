<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="report_style.css" />
    <title>Simulation Report - {{FOLDER_NAME}}</title>
    <style>
      {{STYLE}}
    </style>
  </head>
  <body>
    <header>
      <div class="Title">
        <h1>Simulation <span>Report</span></h1>
        <p>Description of this simulation</p>
      </div>
      <nav>
        <ul>
          <li><a href="#metricsOverview">Overview</a></li>
          <li><a href="#inDepth">In-Depth</a></li>
          <li><a href="#monthly">Monthly</a></li>
          <li><a href="#challengeList">Challenge List</a></li>
        </ul>
      </nav>
    </header>
    <section class="metricsOverview" id="metricsOverview">
      <div class="Subtitle">
        <div class="Text">
          <p>General & Most Important Metrics Regarding Each Phase</p>
          <h1>Metrics <span>Overview</span></h1>
        </div>
        <a href="#inDepth">In-Depth Metrics</a>
      </div>
      <div class="SinglePhaseMetrics">
        <div class="Phase">
          <h2>Phase 1</h2>
          <div class="MetricsDiv">
            <div class="Labels">
              <p>Nº Challenges</p>
              <p>Winrate %</p>
              <p>Average Duration</p>
              <p>Efficiency Ratio</p>
            </div>
            <div class="Values">
              <p>{{p1_number_challenges| default("0")}}</p>
              <p>{{p1_challenge_winrate| default("0")}}</p>
              <p>{{p1_average_challenge_duration| default("0")}}</p>
              <p>{{p1_efficiency_ratio| default("0")}}</p>
            </div>
          </div>
          <a href="#inDepth">See All ></a>
        </div>
        <div class="Phase">
          <h2>Phase 2</h2>
          <div class="MetricsDiv">
            <div class="Labels">
              <p>Nº Challenges</p>
              <p>Winrate %</p>
              <p>Average Duration</p>
              <p>Efficiency Ratio</p>
            </div>
            <div class="Values">
              <p>{{p2_number_challenges| default("0")}}</p>
              <p>{{p2_challenge_winrate| default("0")}}</p>
              <p>{{p2_average_challenge_duration| default("0")}}</p>
              <p>{{p2_efficiency_ratio| default("0")}}</p>
            </div>
          </div>
          <a href="#inDepth">See All ></a>
        </div>
        <div class="Phase">
          <h2>Phase 3</h2>
          <div class="MetricsDiv">
            <div class="Labels">
              <p>Nº Challenges</p>
              <p>Winrate %</p>
              <p>Average Duration</p>
              <p>Average Payout ($)</p>
              <p>Profitability Ratio</p>
            </div>
            <div class="Values">
              <p>{{p3_number_challenges| default("0")}}</p>
              <p>{{p3_payout_winrate| default("0")}}</p>
              <p>{{p3_average_challenge_duration| default("0")}}</p>
              <p>{{p3_average_profit_payout| default("0")}}</p>
              <p>{{p3_profitability_ratio| default("0")}}</p>
            </div>
          </div>
          <a href="#inDepth">See All ></a>
        </div>
      </div>
      <div class="SinglePhaseMetrics">
        <div class="Phase" id="Purple">
          <h2>Challenge</h2>
          <div class="MetricsDiv">
            <div class="Labels">
              <p>Nº Challenges</p>
              <p>Winrate %</p>
              <p>Average Duration</p>
              <p>Failed Phase 1%</p>
              <p>Failed Phase 2%</p>
              <p>Efficiency Ratio</p>
            </div>
            <div class="Values">
              <p>{{c_number_challenges| default("0")}}</p>
              <p>{{c_challenge_winrate| default("0")}}</p>
              <p>{{c_average_challenge_duration| default("0")}}</p>
              <p>{{c_failed_p1_percentage| default("0")}}</p>
              <p>{{c_failed_p2_percentage| default("0")}}</p>
              <p>{{c_efficiency_ratio| default("0")}}</p>
            </div>
          </div>
          <a href="#inDepth">See All ></a>
        </div>
        <div class="Phase" id="Purple">
          <h2>Funded</h2>
          <div class="MetricsDiv">
            <div class="Labels">
              <p>Nº Challenges</p>
              <p>Winrate %</p>
              <p>Average Duration</p>
              <p>Challenge Efficiency</p>
              <p>Payout Probability</p>
              <p>Average Payout p/ Challenge</p>
              <p>Average Profit p/ Payout</p>
              <p>Profitability Ratio</p>
            </div>
            <div class="Values">
              <p>{{f_number_challenges| default("0")}}</p>
              <p>{{f_challenge_winrate| default("0")}}</p>
              <p>{{f_average_challenge_duration| default("0")}}</p>
              <p>{{f_challenge_efficiency_ratio| default("0")}}</p>
              <p>{{f_payout_winrate| default("0")}}</p>
              <p>{{f_average_payouts_challenge| default("0")}}</p>
              <p>{{f_average_profit_payout| default("0")}}</p>
              <p>{{f_profitability_ratio| default("0")}}</p>
            </div>
          </div>
          <a href="#inDepth">See All ></a>
        </div>
      </div>
      <div class="SinglePhaseMetrics">
        <div class="Phase" id="Gold">
          <h2>Monthly</h2>
          <div class="DoubleMetrics">
            <div class="MetricsDiv">
              <div class="Labels">
                <p>Monthly Winrate</p>
                <p>Monthly W/L Ratio</p>
              </div>
              <div class="Values">
                <p>{{m_monthly_winrate| default("0")}}</p>
                <p>{{m_monthly_wl_ratio| default("0")}}</p>
              </div>
            </div>
            <div class="MetricsDiv">
              <div class="Labels">
                <p>Monthly Stability & Return Ratio</p>
                <p>Overall Risk-Adjusted Returns</p>
                <p>Average Monthly Profit</p>
              </div>
              <div class="Values">
                <p>{{m_monthly_stability_return_ratio| default("0")}}</p>
                <p>{{m_overall_risk_adjusted_returns| default("0")}}</p>
                <p>{{m_average_monthly_profit| default("0")}}</p>
              </div>
            </div>
          </div>
          <a href="#inDepth">See All ></a>
        </div>
      </div>
    </section>
    <a id="return" href="">Return</a> 

    <section class="inDepth" id="inDepth">
      <div class="Subtitle">
        <div class="Text">
          <p>Every Metrics Calculated For Each Phase, In-Depth</p>
          <h1><span>In-Depth</span> Metrics</h1>
        </div>
        <div class="Buttons">
          <a href="#Phase1">Phase 1</a>
          <a href="#Phase2">Phase 2</a>
          <a href="#Phase3">Phase 3</a>
          <a href="#Challenge" id="PurpleButton">Challenge</a>
          <a href="#Funded" id="PurpleButton">Funded</a>
          <a href="#Monthly" id="GoldButton">Monthly</a>
        </div>
      </div>
      <div class="InDepthMetrics" id="Phase1">
        <h2>Phase 1</h2>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Number Of Challenges</p>
            <p>Number Of Passed Challenges</p>
            <p>Number Of Failed Challenges</p>
            <p>Challenge Winrate</p>
            <p>Average Challenge Duration</p>
            <p>Average Challenge Duration Passed</p>
          </div>
          <div class="Values">
            <p>{{p1_number_challenges| default("0")}}</p>
            <p>{{p1_number_passed_challenges| default("0")}}</p>
            <p>{{p1_number_failed_challenges| default("0")}}</p>
            <p>{{p1_challenge_winrate| default("0")}}</p>
            <p>{{p1_average_challenge_duration| default("0")}}</p>
            <p>{{p1_average_challenge_passed_duration| default("0")}}</p>
          </div>
        </div>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Average Challenge Duration Failed</p>
            <p>Maximum Consecutive Wins</p>
            <p>Maximum Consecutive Losses</p>
            <p>Average Consecutive Wins</p>
            <p>Average Consecutive Losses</p>
            <p>Efficiency Ratio</p>
          </div>
          <div class="Values">
            <p>{{p1_average_challenge_failed_duration| default("0")}}</p>
            <p>{{p1_max_cons_challenge_passed| default("0")}}</p>
            <p>{{p1_max_cons_challenge_failed| default("0")}}</p>
            <p>{{p1_average_cons_challenge_passed| default("0")}}</p>
            <p>{{p1_average_cons_challenge_failed| default("0")}}</p>
            <p>{{p1_efficiency_ratio| default("0")}}</p>
          </div>
        </div>
      </div>
      <div class="InDepthMetrics" id="Phase2">
        <h2>Phase 2</h2>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Number Of Challenges</p>
            <p>Number Of Passed Challenges</p>
            <p>Number Of Failed Challenges</p>
            <p>Challenge Winrate</p>
            <p>Average Challenge Duration</p>
            <p>Average Challenge Duration Passed</p>
          </div>
          <div class="Values">
            <p>{{p2_number_challenges| default("0")}}</p>
            <p>{{p2_number_passed_challenges| default("0")}}</p>
            <p>{{p2_number_failed_challenges| default("0")}}</p>
            <p>{{p2_challenge_winrate| default("0")}}</p>
            <p>{{p2_average_challenge_duration| default("0")}}</p>
            <p>{{p2_average_challenge_passed_duration| default("0")}}</p>
          </div>
        </div>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Average Challenge Duration Failed</p>
            <p>Maximum Consecutive Wins</p>
            <p>Maximum Consecutive Losses</p>
            <p>Average Consecutive Wins</p>
            <p>Average Consecutive Losses</p>
            <p>Efficiency Ratio</p>
          </div>
          <div class="Values">
            <p>{{p2_average_challenge_failed_duration| default("0")}}</p>
            <p>{{p2_max_cons_challenge_passed| default("0")}}</p>
            <p>{{p2_max_cons_challenge_failed| default("0")}}</p>
            <p>{{p2_average_cons_challenge_passed| default("0")}}</p>
            <p>{{p2_average_cons_challenge_failed| default("0")}}</p>
            <p>{{p2_efficiency_ratio| default("0")}}</p>
          </div>
        </div>
      </div>
      <div class="InDepthMetrics" id="Phase3">
        <h2>Phase 3</h2>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Number Of Challenges</p>
            <p>Number Of Payouts</p>
            <p>Number Of Failed Challenges</p>
            <p>Payout Winrate</p>
            <p>Average Challenge Duration</p>
            <p>Average Challenge Duration Passed</p>
            <p>Average Challenge Duration Failed</p>
          </div>
          <div class="Values">
            <p>{{p3_number_challenges| default("0")}}</p>
            <p>{{p3_number_payouts| default("0")}}</p>
            <p>{{p3_number_failed_challenges| default("0")}}</p>
            <p>{{p3_payout_winrate| default("0")}}</p>
            <p>{{p3_average_challenge_duration| default("0")}}</p>
            <p>{{p3_average_challenge_passed_duration| default("0")}}</p>
            <p>{{p3_average_challenge_failed_duration| default("0")}}</p>
          </div>
        </div>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Maximum Consecutive Payouts</p>
            <p>Maximum Consecutive Losses</p>
            <p>Average Payout ($)</p>
            <p>Total Profit Payouts ($)</p>
            <p>Total Loss Payouts ($)</p>
            <p>Profit Factor</p>
            <p>Profitability Ratio</p>
          </div>
          <div class="Values">
            <p>{{p3_max_cons_payouts| default("0")}}</p>
            <p>{{p3_max_cons_failed| default("0")}}</p>
            <p>{{p3_average_profit_payout| default("0")}}</p>
            <p>{{p3_total_profit_payouts| default("0")}}</p>
            <p>{{p3_total_loss_payouts| default("0")}}</p>
            <p>{{p3_profit_factor| default("0")}}</p>
            <p>{{p3_profitability_ratio| default("0")}}</p>
          </div>
        </div>
      </div>
      <div class="InDepthMetrics" id="Challenge">
        <h2>Challenge</h2>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Number Of Challenges</p>
            <p>Number Of Passed Challenges</p>
            <p>Number Of Failed Challenges</p>
            <p>Challenge Winrate</p>
            <p>Average Challenge Duration</p>
            <p>Average Challenge Duration Passed</p>
            <p>Average Challenge Duration Failed</p>
          </div>
          <div class="Values">
            <p>{{c_number_challenges| default("0")}}</p>
            <p>{{c_number_passed_challenges| default("0")}}</p>
            <p>{{c_number_failed_challenges| default("0")}}</p>
            <p>{{c_challenge_winrate| default("0")}}</p>
            <p>{{c_average_challenge_duration| default("0")}}</p>
            <p>{{c_average_challenge_passed_duration| default("0")}}</p>
            <p>{{c_average_challenge_failed_duration| default("0")}}</p>
          </div>
        </div>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Maximum Consecutive Wins</p>
            <p>Maximum Consecutive Losses</p>
            <p>Average Consecutive Wins</p>
            <p>Average Consecutive Losses</p>
            <p>Failed Phase 1 %</p>
            <p>Failed Phase 2 %</p>
            <p>Efficiency Ratio</p>
          </div>
          <div class="Values">
            <p>{{c_max_cons_challenge_passed| default("0")}}</p>
            <p>{{c_max_cons_challenge_failed| default("0")}}</p>
            <p>{{c_average_cons_challenge_passed| default("0")}}</p>
            <p>{{c_average_cons_challenge_failed| default("0")}}</p>
            <p>{{c_failed_p1_percentage| default("0")}}</p>
            <p>{{c_failed_p2_percentage| default("0")}}</p>
            <p>{{c_efficiency_ratio| default("0")}}</p>
          </div>
        </div>
      </div>
      <div class="InDepthMetrics" id="Funded">
        <h2>Funded</h2>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Number Of Challenges</p>
            <p>Number Of Passed Challenges</p>
            <p>Number Of Failed Challenges</p>
            <p>Challenge Winrate</p>
            <p>Average Challenge Duration</p>
            <p>Average Challenge Duration Passed</p>
            <p>Average Challenge Duration Failed</p>
            <p>Maximum Consecutive Wins</p>
            <p>Maximum Consecutive Losses</p>
            <p>Average Consecutive Wins</p>
          </div>
          <div class="Values">
            <p>{{f_number_challenges| default("0")}}</p>
            <p>{{f_number_passed_challenges| default("0")}}</p>
            <p>{{f_number_failed_challenges| default("0")}}</p>
            <p>{{f_challenge_winrate| default("0")}}</p>
            <p>{{f_average_challenge_duration| default("0")}}</p>
            <p>{{f_average_challenge_passed_duration| default("0")}}</p>
            <p>{{f_average_challenge_failed_duration| default("0")}}</p>
            <p>{{f_max_cons_challenge_passed| default("0")}}</p>
            <p>{{f_max_cons_challenge_failed| default("0")}}</p>
            <p>{{f_average_cons_challenge_passed| default("0")}}</p>
          </div>
        </div>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Average Consecutive Losses</p>
            <p>Average Profit Per Challenge</p>
            <p>Challenge Efficiency Ratio</p>
            <p>Payout Winrate</p>
            <p>Maximum Consecutive Payouts</p>
            <p>Average Payouts Per Challenge</p>
            <p>Average Profit Per Payout</p>
            <p>Profitability Ratio</p>
          </div>
          <div class="Values">
            <p>{{f_average_cons_challenge_failed| default("0")}}</p>
            <p>{{f_average_profit_challenge| default("0")}}</p>
            <p>{{f_challenge_efficiency_ratio| default("0")}}</p>
            <p>{{f_payout_winrate| default("0")}}</p>
            <p>{{f_max_cons_payouts| default("0")}}</p>
            <p>{{f_average_payouts_challenge| default("0")}}</p>
            <p>{{f_average_profit_payout| default("0")}}</p>
            <p>{{f_profitability_ratio| default("0")}}</p>
          </div>
        </div>
      </div>
      <div class="InDepthMetrics" id="Monthly">
        <h2>Monthly</h2>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Winning Months</p>
            <p>Losing Months</p>
            <p>Monthly Winrate</p>
            <p>Average Monthly Profit</p>
            <p>Average Monthly Loss</p>
          </div>
          <div class="Values">
            <p>{{m_winning_months| default("0")}}</p>
            <p>{{m_losing_months| default("0")}}</p>
            <p>{{m_monthly_winrate| default("0")}}</p>
            <p>{{m_average_monthly_profit| default("0")}}</p>
            <p>{{m_average_monthly_loss| default("0")}}</p>
          </div>
        </div>
        <div class="MetricsDiv">
          <div class="Labels">
            <p>Monthly W/L Ratio</p>
            <p>Monthly Stability & Return Ratio</p>
            <p>Overall Risk-Adjusted Returns</p>
          </div>
          <div class="Values">
            <p>{{m_monthly_wl_ratio| default("0")}}</p>
            <p>{{m_monthly_stability_return_ratio| default("0")}}</p>
            <p>{{m_overall_risk_adjusted_returns| default("0")}}</p>
          </div>
        </div>
      </div>
    </section>
    <a id="return" href="">Return</a>
    <div id ="challengeList"></div>

    {% for phase, table_html in runs_tables_html.items() %}
    <section class="challengeList" id="challengeList_{{ phase }}">
      <div class="Subtitle">
        <div class="Text">
          <p>Detailed results for all runs in {{ phase | capitalize }}</p>
          <h1><span>{{ phase | capitalize }}</span> Runs</h1>
        </div>
      </div>

      <div class="table-container">
        {{ table_html | safe }}
      </div>
    </section>
    <a id="return" href="">Return</a>
    {% endfor %}

    <section class="Monthly" id="monthly">
      <div class="Subtitle">
        <div class="Text">
          <p>Funded Simulation Organized Per Month/Year</p>
          <h1>Monthly <span>Simulation</span></h1>
        </div>
      </div>
       {% if monthly_pnl_table_html %}
      <div class="table-container">
        {{ monthly_pnl_table_html | safe }}
      </div>
      {% else %}
      <p>No monthly PnL data available for the funded phase.</p>
      {% endif %}

    </section>
    <a id="return" href="">Return</a>
  </body>
</html>
